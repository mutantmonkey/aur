name: Update flyctl
on:
  workflow_dispatch:
permissions:
  id-token: write
  contents: write

jobs:
  update:
    runs-on: ubuntu-24.04
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    - uses: chainguard-dev/actions/setup-gitsign@58b5d1b6769b7e88dfa5c85bbc81a5a02eaca5bc
    - uses: mutantmonkey/geschenkerbauer/actions/pkgctl-update@19165f0078ade22e4f4d0d6fa288e21717aada57
      with:
        pkgbase: flyctl
    - name: Create Git commit
      run: |
        git add flyctl
        git commit -m "Update to latest version of flyctl"
    - name: Push changes
      run: git push
